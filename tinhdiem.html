<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=0.7">
		<title>Tính điểm tốt nghiệp</title>
		<link rel="stylesheet" type="text/css" href="css/css.css">
		<style>
			input[type=text], select {
			  width: 100%;
			  padding: 5px 20px;
			  margin: 8px 0;
			  display: inline-block;
			  border: 1px solid #ccc;
			  border-radius: 4px;
			  box-sizing: border-box;
			}

			input[type=submit] {
			  width: 100%;
			  background-color: #4CAF50;
			  color: white;
			  padding: 14px 20px;
			  margin: 8px 0;
			  border: none;
			  border-radius: 4px;
			  cursor: pointer;
			}

			input[type=submit]:hover {
			  background-color: #45a049;
			}

			table {
			  margin: 0px auto;
			}
			
			td {
			  border-radius: 5px;
			  background-color: #f2f2f2;
			  padding: 5px;
			}
		</style>
		
	</head>
	<body class="markdown-body">
		<center>
			<h1>Tính điểm tốt nghiệp</h1>
			(Theo công thức tính điểm chính thức của Bộ GD&ĐT năm 2019)<br>
			By Ngọc Phát, A6-K96 Quốc Học Quy Nhơn, K19 ĐHKHTN-ĐHQGHCM<br>
			<form>
				Tổ hợp xét tuyển:	
				<input type="radio" name="ToHop" value="KHTN" onclick="showKHTN()"> KHTN
				<input type="radio" name="ToHop" value="KHXH" onclick="showKHXH()">	KHXH<br>
				<table id="THMon" align="center">
					<tr>
						<td align="right"><div id="THMon1">Môn 1:</div>
						<input type="text" id="THMon1_input" size=6 min=0 max=10 value=0 onclick="clearZero(event)"></td>
						<td align="right"><div>Toán:</div>
						<input type="text" id="Toan_input" size=6 min=0 max=10 value=0 onclick="clearZero(event)"></td>
					</tr>
					<tr>
						<td align="right"><div id="THMon2">Môn 2:</div>
						<input type="text" id="THMon2_input" size=6 min=0 max=10 value=0 onclick="clearZero(event)"></td>
						<td align="right"><div>Văn:</div>
						<input type="text" id="Van_input" size=6 min=0 max=10 value=0 onclick="clearZero(event)"></td>
					</tr>
					<tr>
						<td align="right"><div id="THMon3">Môn 3:</div>
						<input type="text" id="THMon3_input" size=6 min=0 max=10 value=0 onclick="clearZero(event)"></td>
						<td align="right"><div>Anh:</div>
						<input type="text" id="Anh_input" size=6 min=0 max=10 value=0 onclick="clearZero(event)"></td>
					</tr>
					<tr>
						<td align="right"><div>TB Năm:</div>
						<input type="text" id="TB_input" size=6 min=0 max=10 value=0 onclick="clearZero(event)"></td>
						<td align="right"><div> K.khích*:</div>
						<input type="text" id="KK_input" size=6 min=0 max=10 value=0 onclick="clearZero(event)"></td>
					</tr>
				</table>
				<i id = "Chu_thich" style="font-size:12px">(*) Tổng điểm khuyến khích được cộng (nghề, ...)</i> </br>
				<button type="Submit" onclick="Submit()">Tính điểm</button>	
				<button type="button" onclick="clearAll()">Nhập lại</button>
			</form>
			<i style="font-size:12px">Cập nhật ngày 03/12/2019</i>
		</center>
	</body>
	<script type="text/javascript">
		// Public source trong html để dễ kiểm tra và ai tò mò thì biết thêm đc vài easter eggs :> 

		var THMon_table = document.getElementById("THMon");
		THMon_table.style.visibility = "collapse";
		Chu_thich.style.visibility = "collapse";
		var input_ids = ["THMon1_input", "THMon2_input", "THMon3_input", "Toan_input", 
							"Van_input", "Anh_input", "TB_input", "KK_input"];
		function parseLcle(num){
			return parseFloat(num.replace(",", "."));
		}
		function clearAll(){		
			for(i=0;i<input_ids.length;i++){
				document.getElementById(input_ids[i]).value = 0;
			}
		}
		function clearZero(e){
			if (parseFloat(e.target.value) == 0){
				e.target.value = ""
			}
		}
		function showKHTN(){
			document.getElementById("THMon1").innerHTML = "Lý: ";
			document.getElementById("THMon2").innerHTML = "Hoá: ";
			document.getElementById("THMon3").innerHTML = "Sinh: ";
			for(i=0;i<3;i++){
				document.getElementById(input_ids[i]).value = 0;
			}
			THMon_table.style.visibility = "visible";
			Chu_thich.style.visibility = "visible";
		}
		function showKHXH(){
			document.getElementById("THMon1").innerHTML = "Sử: ";
			document.getElementById("THMon2").innerHTML = "Địa: ";
			document.getElementById("THMon3").innerHTML = "GDCD: ";
			for(i=0;i<3;i++){
				document.getElementById(input_ids[i]).value = 0;
			}
			THMon_table.style.visibility = "visible";
			Chu_thich.style.visibility = "visible";

		}
		function Submit(){
			for(i=0;i<input_ids.length;i++){
				if (isNaN(parseFloat(document.getElementById(input_ids[i]).value))){
					alert("Giá trị bạn đã nhập không hợp lệ.\nVui lòng kiểm tra lại. ");
					return;
				}
			}
			ifzero = 0;
			for(i=0;i<input_ids.length;i++){
				ifzero += parseFloat(document.getElementById(input_ids[i]).value);
			}
			if(ifzero==0){
				alert("Bạn phải nhập cái gì vào mới tính được chứ :>");
				return;
			}
			var THMon1 = parseLcle(document.getElementById("THMon1_input").value);
			var THMon2 = parseLcle(document.getElementById("THMon2_input").value);
			var THMon3 = parseLcle(document.getElementById("THMon3_input").value);
			var Toan = parseLcle(document.getElementById("Toan_input").value);
			var Van = parseLcle(document.getElementById("Van_input").value);
			var Anh = parseLcle(document.getElementById("Anh_input").value);
			var TB = parseLcle(document.getElementById("TB_input").value);
			var KK = parseLcle(document.getElementById("KK_input").value);
			var arr = [THMon1, THMon2, THMon3, Toan, Van, Anh, TB];
			var DiemTN = (((THMon1 + THMon2 + THMon3)/3 + Toan + Van + Anh +KK)/4)*0.7 + TB*0.3;
			var KQ = "";
			for (i=0; i<=arr.length; i++){			
				if (arr[i] > 10){
					alert("Ây da, chơi ăn gian là ko đc nha :>");
					return;
				}
			}
			for (i=0; i<=arr.length; i++){			
				if (arr[i] == 10){
					alert("10 điểm hả? Có tự tin quá vậy không bạn tôi ơi :>");
					break;
				}
			}
			biquan = 0;
			lacquan = 0;
			for (i=0; i<=arr.length; i++){			
				if (arr[i] < 6){
					biquan++;
				}
				if (arr[i] >= 8){
					lacquan++;
				}
			}
			if (biquan >= 4){
				alert("Chời ơi sao bi quan quá vậy :>");
			} 	
			if (lacquan >= 4){
				alert("Lạc quan quá đó :>");	
			} 
			if (biquan >= 3 && lacquan >= 3){
				alert("Sao học lệch vậy :>");
			} 
			for (i=0; i<=arr.length; i++){			
				if (arr[i] <= 1){
					alert("Bạn có ít nhất một môn dưới hoặc bằng 1 điểm nên bạn đã bị liệt.\nĐiểm tốt nghiệp: " + DiemTN + " (Rớt)");
					return;
				}
			}
			if (isNaN(DiemTN)){
				alert("Đã xảy ra lỗi trong quá trình xử lí.\nVui lòng kiểm tra lại các giá trị đã nhập.");
				return;
			}
			if(DiemTN>=5){
				KQ = "Đậu";
			}
			else{
				KQ = "Rớt";
			}
			alert("Điểm tốt nghiệp: " + DiemTN + " (" + KQ +")");
		}
	</script>
</html>